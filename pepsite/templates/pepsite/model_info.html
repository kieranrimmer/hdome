<!DOCTYPE html>
<html lang="en">
  <head>

    {% load staticfiles %}

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>HaploDome - Welcome</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">
    <link href="{% static "css/tablesorter_style.css" %}" rel="stylesheet">

		<script src="{% static "js/jquery-2.0.3.min.js" %}">
		</script>
<script type="text/javascript" src="{% static "js/jquery.tablesorter.js" %}"></script>


<script>


$(document).ready(function() {

$('#footer').load( "{% url 'pepsite:footer' %}" );
$("#cssTable").tablesorter({
    //stringTo : 'max',

    textExtraction : 'complex',

	sortMultiSortKey: 'none'

    //headers: {
    //        2: { sorter: "string" },
    //        3: { sorter: "string" },
    //        4: { sorter: "string" }
    //    }, 

    //textExtraction: {
    //  0: 'complex', // function(node, table, cellIndex){ return $(node).find("a").text(); },
    //  1: 'complex', //function(node, table, cellIndex){ return $(node).find("a").text(); },
    //  2: 'complex',//function(node, table, cellIndex){ return $(node).find("a").text(); },
    //  3: 'complex',//function(node, table, cellIndex){ return $(node).find("a").text(); },
    //  4: 'complex',//function(node, table, cellIndex){ return $(node).find("a").text(); },
    //  5: 'complex'//function(node, table, cellIndex){ return $(node).find("a").text(); }
    //	}
    });

});

</script>


<style>
#cssTable td 
{
    text-align:center; 
    vertical-align:middle;
}
#cssTable th 
{
    text-align:center; 
    vertical-align:middle;
}

th:hover
{
background-color:yellow;
}
th
{
cursor:pointer;
}

</style>

</head>

<br>

<div class="container">
<div class="jumbotron">
<span class="text-center">


<h1>Model type <span class="text-primary">{{ query_on }}</span> = <span class="text-info">{{model_type}}</span>, Model id = {{model_id}}</h1>
<p class="text-info">Interactive results page</p>



</span>
</div>


{% if model_type == "Allele" %}

    <hr>

    <h3>Details for <span class="text-primary">{{model_type}}</span> = <span class="text-info">{{instance.code}}</span>:</h3>
    </br>

    <table class="table" id="cssTable">
    <thead>
    <tr>
    <th>Gene</th><th>Cell Lines</th><th>Antibodies</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>
    <a href="{% url 'pepsite:gene_expts' instance.gene.id %}">{{ instance.gene.name }}</a>
    </td>
    <td>
    {% for cl in  instance.cellline_set.all  %}
	<a href="{% url 'pepsite:cell_line_expts' cl.id %}">{{ cl.name }}</a>
    {% endfor %}
    </td>
    <td>
    {% for ab in  instance.antibody_set.all  %}
	<a href="{% url 'pepsite:antibody_expts' ab.id %}">{{ ab.name }}</a>
    {% endfor %}
    </td>
    </tr>
    </table>
    <hr>

{% elif model_type == "Protein" %}


    <hr>

    <h3>Details for <span class="text-primary">{{model_type}}</span> = <span class="text-info">{{instance.name}}</span>:</h3>
    </br>

    <table class="table" id="cssTable">
    <thead>
    <tr>
    <th>Description</th><th>Uniprot ID</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>
    <a href="{% url 'pepsite:protein_full_listing' instance.id %}">{{ instance.description }}</a>
    </td>
    <td>
	<a href="http://www.uniprot.org/uniprot/{{instance.prot_id}}" target="_blank">{{instance.prot_id}}</a>
    </td>
    </tr>
    </table>
    <hr>

{% elif model_type == "Peptide" %}


    <hr>

    <h3>Details for <span class="text-primary">{{model_type}}</span> = <span class="text-info">{{instance.sequence}}</span>:</h3>
    </br>

    <table class="table" id="cssTable">
    <thead>
    <tr>
    <th>Sequence</th><th>length</th><th>Mass</th><th>PTMs observed</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>
    <a href="{% url 'pepsite:peptide_expts' instance.id %}">{{ instance.sequence }}</a>
    </td>
    <td>
    {{ instance.sequence | length }}
    </td>
    <td>
    {{instance.mass}}
    </td>
    <td>
    {% for ide in instance.idestimate_set.all %}
	{{ ide.ptm.description }}
    {% endfor %}
    </td>
    </tr>
    </table>
    <hr>


{% endif %}


<br>

<form action="{% url 'pepsite:allele_search' %}">
<input class="btn btn-warning" type="submit" value="Make another allele search">
</form>

<br>

<form action="{% url 'pepsite:index' %}">
<input class="btn btn-danger" type="submit" value="Return to Haplodome search index">
</form>

<br>

<form action="{% url 'home' %}">
<input class="btn btn-danger" type="submit" value="Return to Haplodome home">
</form>


<div id="footer"></div>

</div>
</html>
